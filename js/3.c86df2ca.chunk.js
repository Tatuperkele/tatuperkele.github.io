(this.webpackJsonpwidget=this.webpackJsonpwidget||[]).push([[3],{315:function(e,r,t){"use strict";t.r(r);var n=t(2),a=t.n(n),c=t(8),u=t(31),i=t(3),o=t(4),s=t(6),f=t(7),p=new(function(e){Object(s.a)(t,e);var r=Object(f.a)(t);function t(){return Object(i.a)(this,t),r.apply(this,arguments)}return Object(o.a)(t,[{key:"logout",value:function(){this.emit("logout",void 0)}},{key:"refresh",value:function(){this.emit("refresh",void 0)}}]),t}(t(114).a)),h=!1,l=function(){var e=Object(c.a)(a.a.mark((function e(r){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state.userSession,!h){e.next=3;break}return e.abrupt("return");case 3:return h=!0,e.next=6,t.fetchCurrentUser();case 6:p.subscribe("refresh",(function(){return t.fetchCurrentUser()}));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),b=t(49),w=t.n(b),d=t(21),v=t(5),k=t(95),x=t(57),g=function(){var e=Object(c.a)(a.a.mark((function e(r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(d.a)(function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=r.state.userSession).state.user||t.url===x.g){e.next=7;break}case 2:if(!n.refreshSessionLock.isLocked()){e.next=7;break}return e.next=5,Object(k.a)(200);case 5:e.next=2;break;case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),Object(d.b)((function(e){return e}),function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c,u,i,o,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.state.userSession,!t.response){e.next=13;break}if(!((c=t.response)&&c.config&&401===c.status&&c.config.url.includes(v.a)&&c.config.withCredentials)){e.next=13;break}if(u=c.config.url===x.e,i=c.config.url===x.g,o=c.config.url===x.a,!(u||i||o)){e.next=9;break}throw t;case 9:return s=window.location.pathname.split("/"),e.next=12,n.refreshSessionWithLockOrLogout().then((function(e){if(e)return w()(t.config);throw n.state.user&&(window.location.href="/"),s.includes("link-account")&&""!==window.location.search&&(window.location.href="".concat(v.i,"link-account").concat(window.location.search)),t}));case 12:return e.abrupt("return",e.sent);case 13:throw t;case 14:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),O=t(115),j=t(167),m=t(11),y=!1,S=[g,l,function(){var e=Object(c.a)(a.a.mark((function e(r){var t,n,c,u,i,o,s,f,p,h,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state,n=t.userSession,c=t.appHistory,!y&&!n.state.user){e.next=3;break}return e.abrupt("return");case 3:if(y=!0,u=new URLSearchParams(c.location.search),i=u.get("code")){e.next=8;break}return e.abrupt("return");case 8:if(o=u.get("state")||"",s=O.a.matchReceivedState(o),f=s.result,!(p=s.error)){e.next=13;break}return console.error(p),e.abrupt("return");case 13:if(f){e.next=15;break}return e.abrupt("return");case 15:return h=f.payload,l=f.codeVerifier,e.next=18,n.loginWithAuthorizationCode({code:i,codeVerifier:l}).then((function(){if(!n.currentUserNeedAdministration()){if(h){var e=j.a.readJSONString(h);if(null!==e){var r=e.path;return void(r&&(c.replace(r),""!==r&&"/"!==r&&(window.location.href=r)))}}c.replace("/")}})).catch((function(){console.error(p),window.location.replace(Object(m.a)(v.i,"error/500"))}));case 18:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()];r.default=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.reduce(function(){var e=Object(c.a)(a.a.mark((function e(r,t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:return e.next=4,t(u.a);case 4:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),Promise.resolve());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}]);