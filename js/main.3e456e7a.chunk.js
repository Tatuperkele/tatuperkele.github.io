(this.webpackJsonpwidget=this.webpackJsonpwidget||[]).push([[0],{11:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return u}));var n=r(5);function a(e){for(var t=e;"/"===t[t.length-1];)t=t.slice(0,-1);return t}function i(e){for(var t=e;"/"===t[0];)t=t.slice(1);return t}function c(e){return i(a(e))}function o(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.forEach((function(e){if("string"!==typeof e)throw new Error("combinePaths error: one of the path is not a string")})),t.map((function(e){return c(e)})).map((function(e){return e.split("/")})).reduce((function(e,t){return e.concat(t)}),[]).filter(Boolean).join("/")}function s(e){for(var t=new URL(e),r=t.origin,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var c=o.apply(void 0,[t.pathname].concat(a));return new URL(c,r).toString()}function u(e,t){return"".concat(a(s(n.d,e))).concat(t?"?return_url=".concat(t):"")}},114:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(3),a=r(4),i=function(){function e(){Object(n.a)(this,e),this.listeners=new Map}return Object(a.a)(e,[{key:"getEventListenerSet",value:function(e){var t=this.listeners.get(e);return t||(t=new Set,this.listeners.set(e,t)),t}},{key:"emit",value:function(e,t){return Array.from(this.getEventListenerSet(e)).map((function(e){return e(t)}))}},{key:"subscribe",value:function(e,t){this.getEventListenerSet(e).add(t)}},{key:"unsubscribe",value:function(e,t){this.getEventListenerSet(e).delete(t)}},{key:"clear",value:function(e){this.getEventListenerSet(e).clear()}}]),e}()},115:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(5),a=r(59),i=new a.a({saveCodeChallengeStoredState:function(e){return localStorage.setItem("pp:pkce:cd",e)},loadLastCodeChallengeStoredState:function(){return localStorage.getItem("pp:pkce:cd")},clearLastCodeChallengeStoredState:function(){return localStorage.removeItem("pp:pkce:cd")},clientId:n.b,redirectURI:n.j})},14:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"f",(function(){return i})),r.d(t,"g",(function(){return c})),r.d(t,"e",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return u})),r.d(t,"b",(function(){return l}));var n=r(25),a=Object(n.a)("GAME","SOFTWARE","DLC","DEMO"),i=Object(n.a)("ACTIVE","INACTIVE"),c=Object(n.a)("APP","COINS","INGAMEITEM","CODE","BUNDLE"),o=Object(n.a)("DURABLE","CONSUMABLE"),s=Object(n.a)("APP","ENTITLEMENT","DISTRIBUTION","CODE"),u=Object(n.a)("ACTIVE","INACTIVE","DISTRIBUTED","REVOKED","DELETED"),l=Object(n.a)("REAL","VIRTUAL")},167:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(3),a=r(4),i=r(0),c=r(30),o=i.g({path:i.i}),s=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,null,[{key:"fromPath",value:function(e){return{path:e}}},{key:"toJSONString",value:function(e){return JSON.stringify(e)}},{key:"readJSONString",value:function(e){try{var t=o.decode(JSON.parse(e));if(Object(c.isLeft)(t))throw new Error("Decode failed");return t.right}catch(r){return null}}}]),e}()},169:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return w}));var n=r(2),a=r.n(n),i=r(8),c=r(3),o=r(4),s=r(6),u=r(7),l=r(12),f=r(170),p=r(21),d=r(23),h=r(57),m=r(61),g=r(11),b=r(5),v=r(38),y=r(95),O=r(99),C=r(70),j={key:"RefreshSession.lock",isLocked:function(){var e=localStorage.getItem(j.key);if(!e)return!1;var t=Number(e);return!isNaN(t)&&t>(new Date).getTime()},lock:function(e){localStorage.setItem(j.key,"".concat((new Date).getTime()+e))},unlock:function(){localStorage.removeItem(j.key)}},w=function(t){Object(s.a)(n,t);var r=Object(u.a)(n);function n(t){var o;return Object(c.a)(this,n),(o=r.call(this)).config=void 0,o.refreshSessionLock=void 0,o.goToVerifyEmail=function(e){var t=new URL(Object(g.a)(b.i,"account/overview"));e&&e.path&&t.searchParams.append("path",e.path),window.location.replace(t.toString())},o.goToUpgradeAccount=function(e){var t=new URL(Object(g.a)(b.i,"account/overview"));e&&e.path&&t.searchParams.append("path",e.path),window.location.replace(t.toString())},o.goToAcceptLegal=function(e){var t=new URL(Object(g.a)(b.i,"account/privacy-records"));e&&e.path&&t.searchParams.append("path",e.path),window.location.replace(t.toString())},o.goToDeletion=function(){var e=Object(g.a)(b.i,"account/overview");window.location.replace(e)},o.refreshSessionWithLockOrLogout=Object(i.a)(a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.refreshSessionLock.isLocked()){t.next=2;break}return t.abrupt("return",Promise.resolve().then(Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.refreshSessionLock.isLocked()){e.next=5;break}return e.next=3,Object(y.a)(1e3);case 3:e.next=0;break;case 5:return e.abrupt("return",{});case 6:case"end":return e.stop()}}),e)})))));case 2:return o.refreshSessionLock.lock(1e3),r=!0,Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return o.refreshSessionLock.lock(1e3),e.next=4,Object(y.a)(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),t.abrupt("return",Promise.resolve().then(Object(i.a)(a.a.mark((function t(){var r,n,i,c,o,s,u,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p.c.withSessionIdFromCookie({headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic ".concat(new e("".concat(b.b,":")).toString("base64"))}}),t.next=3,Object(h.f)(r,{clientId:b.b,refreshToken:null});case 3:if(!(n=t.sent).error){t.next=6;break}return t.abrupt("return",!1);case 6:return i=n.response.data,c=i.refresh_token,o=i.access_token,s=i.expires_in,u=i.is_comply,l=i.refresh_expires_in,t.abrupt("return",{sessionId:o,refreshId:c,expiresIn:s,refreshExpiresAt:l,isComply:u});case 8:case"end":return t.stop()}}),t)})))).finally(Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.logout(!1);case 2:r=!1,j.unlock();case 4:case"end":return e.stop()}}),e)})))));case 6:case"end":return t.stop()}}),t)}))),o.state={legalLogic:void 0,isFetching:!1,isLoggingOut:!1,user:void 0,error:void 0},o.config=t,o.refreshSessionLock=j,o}return Object(o.a)(n,[{key:"currentUserIsHeadlessAccount",value:function(){var e=this.state.user;return!!e&&""===e.emailAddress}},{key:"currentUserEmailNeedsVerification",value:function(){var e=this.state.user;return!!e&&(d.a.is(e)&&!!e.emailAddress&&!e.emailVerified)}},{key:"currentUserIsUnderDeletionStatus",value:function(){var e=this.state.user;return!!e&&!!e.deletionStatus}},{key:"currentUserIsBlockedByLegal",value:function(){var e=this.state.legalLogic;if(e){var t=e.state.eligibilities;return!!t&&t.length>0}return!1}},{key:"currentUserNeedAdministration",value:function(){return!!this.state.user&&(this.currentUserIsUnderDeletionStatus()||this.currentUserIsBlockedByLegal()||this.currentUserIsHeadlessAccount()||this.currentUserEmailNeedsVerification())}},{key:"fetchCurrentUser",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new O.a({namespace:b.h}),this.setState({isFetching:!0}),n=p.c.withSessionIdFromCookie(),e.next=6,Object(h.b)(n).then(function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error;case 2:return e.next=4,r.init();case 4:return e.abrupt("return",t.response.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:return c=e.sent,e.next=9,this.setState({user:c,error:void 0});case 9:if(!this.currentUserEmailNeedsVerification()){e.next=11;break}return e.abrupt("return",this.goToVerifyEmail(t));case 11:if(!this.currentUserIsHeadlessAccount()){e.next=13;break}return e.abrupt("return",this.goToUpgradeAccount(t));case 13:if(!this.currentUserIsBlockedByLegal()){e.next=15;break}return e.abrupt("return",this.goToAcceptLegal(t));case 15:if(!this.currentUserIsUnderDeletionStatus()){e.next=17;break}return e.abrupt("return",this.goToDeletion());case 17:e.next=27;break;case 19:if(e.prev=19,e.t0=e.catch(0),!Object(f.a)(e.t0)){e.next=25;break}e.t0.response?401===(o=e.t0.response.status)?this.setState({user:null,error:void 0}):o>=500?this.setState({error:m.a.server}):this.setState({error:m.a.unknown}):this.setState({error:m.a.network}),e.next=27;break;case 25:return e.next=27,this.setState({error:m.a.unknown});case 27:return e.prev=27,e.next=30,this.setState({isFetching:!1});case 30:return e.finish(27);case 31:case"end":return e.stop()}}),e,this,[[0,19,27,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithAuthorizationCode",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n,i,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.code,n=t.codeVerifier,i=t.statePayload,c=p.c.withSessionIdFromCookie({headers:{"Device-Id":localStorage.getItem(v.a)||Object(v.b)(),"Device-Name":C.name.toString(),"Device-Os":C.os.toString(),"Device-Type":Object(v.c)()}}),e.next=4,Object(h.c)(c,{code:r,codeVerifier:n,redirectURI:this.config.redirectURI,clientId:this.config.clientId});case 4:if(!(o=e.sent).error){e.next=7;break}throw o.error;case 7:return e.next=9,this.fetchCurrentUser(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,r,n=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(n.length>0&&void 0!==n[0])||n[0],!this.state.isLoggingOut){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.setState({isLoggingOut:!0});case 5:if(e.prev=5,!t){e.next=11;break}return r=p.c.withSessionIdFromCookie({headers:{"Content-Type":"text/plain"}}),e.next=10,Object(h.d)(r);case 10:this.setState({legalLogic:new O.a({namespace:b.h}),error:void 0});case 11:return e.prev=11,this.setState({user:null,isLoggingOut:!1,error:void 0}),e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[5,,11,14]])})));return function(){return e.apply(this,arguments)}}()}]),n}(l.Container)}).call(this,r(19).Buffer)},17:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(2),a=r.n(n),i=r(8),c=r(171);function o(){return(o=Object(i.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return n=e.sent,e.abrupt("return",{response:n,error:null});case 7:return e.prev=7,e.t0=e.catch(0),e.prev=9,e.next=12,r(e.t0);case 12:return e.t1=e.sent,e.abrupt("return",{response:null,error:e.t1});case 16:return e.prev=16,e.t2=e.catch(9),console.error("NetworkCallWrapperException: ",e.t2),e.abrupt("return",Promise.resolve({response:null,error:e.t0}));case 20:case"end":return e.stop()}}),e,null,[[0,7],[9,16]])})))).apply(this,arguments)}var s=r(30);function u(e,t){return Object(s.isRight)(t.decode(e.data))}function l(e,t){return c.PathReporter.report(t.decode(e.data))}function f(e,t,r,n){return function(e,t){return o.apply(this,arguments)}(Object(i.a)(a.a.mark((function n(){var i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e();case 2:if(u(i=n.sent,t)){n.next=5;break}throw new r(l(i,t).join("\n\n"));case 5:return n.abrupt("return",i);case 6:case"end":return n.stop()}}),n)}))),n)}},170:function(e,t,r){"use strict";function n(e){return!!e&&!!e.config}r.d(t,"a",(function(){return n}))},173:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAO0SURBVHgBxVdLaxNRFP5mMmOrbTQFnwgyRfCBRRqXblpdCz5w58aNC3HRLhTFLmJACi6EunDhQqg/wEdFxW5suxFXJmCxVdHEd2uVptW0aSeZ8Zy5mSTmMXNDo35wM5l7ztzzuOfcc64CWURiIZj6ESjogo1OqDDoGXJoClKwkISixAF1FFpmCNFwSmZZxZcjMmEgm+shzpMFgVJQBqGpUUR3Jz25alLY4px2CbbSgxVBHUB6KYqB6h6proBjtTUC2AYaAiVJ3jhQzRtqBW9kvLOxwhm2MOgirV2u2p/Cyyxv1YAdrYL28ieQyUEKGi27d534/24BSC274io8UfQA73m55UFS4NhWMZpVSENTi9+1rykh5D3RGwtVKsABV+52C8JqHqtVoYTmkThMYx7mdb/LWmVMJKOlKeK+idVEqiXghbM7gJAOPPlGY6Y6z76QsJoFX570XA5aoJ23Qngga0Xwr7Gcc9JbEXuvz/p+sDtIrg0IL/DIkGsfTQnawY00R/GSMsUwbeDFnN+KKaTNdtU5XmUwQVnwPH+W7GsTCrngQOM5Vox5/IUzQmjRD2t0fndRYPhyd7e3IMQBtr5JTHCku0o0B8QzqDtzWcvGg1e/IIFuBX3jMfrT6ceZoCA02EIJpCgI2/yCkGEjrlIUGPhfINnsgZr+79zSjNiZ7VgJTt7+jFux2pW5juPt70B1mglJXBieRvj6W5x7PF1B6x+bcWin739BHUipFAhJWe4kFZX41ww+zZsVtA+U/0ybnFmGNEg2nR7cRtm+WcA4vmctdm1oQsem5graoV1BbKbiZbStQh2Ia7DtMafdklGgYx2O16Ad2hl0Rl1QMKpCN+/VEwcNRdoc0pzutW98kF57vXi7byaQnDVFxeOzP5EGKMUcnNgGUMpiYh54OIU2qhm+6WtjkPtEzXnJmteg6Z4KsPD3XGhKu6JUPhjducWcMzeXseCLnBnlhzgHroST9DsAGbwmy++Q5U9/FOe4P+C5mOROWiRLyIRWmNRII3HxMDw//r4kRil4O7zbmSI47ReF9YxAgTB2I4P9p4agBFiJQs/GRe/ZxwUMv0kjk/Wvmi5aVynOd2OJBTo3skXhOfMAroanXL7KBo/bchN3G16kxIF3FP0d8dLp6h3m+ZiBgD7SMCVcy/P7XorqxYgZdTMM2cD0AgfcAq1VRTjD/3IqvBGRPS3z4NvyICxK7xqC5RVwwZeJNRSgULvoK64dBlAIVs6/JI04rMAoFul6PiB3Pf8NBnNn3doDK8oAAAAASUVORK5CYII="},176:function(e,t,r){e.exports=r(309)},21:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return f}));var n=r(98),a=r(3),i=r(4),c=r(49),o=r.n(c),s=new Map,u=new Map,l=function(e,t){var r={interceptor:e,errorInterceptor:t},n=o.a.interceptors.request.use(e,t);return s.set(n,r),n},f=function(e,t){var r={interceptor:e,errorInterceptor:t},n=o.a.interceptors.response.use(e,t);return u.set(n,r),n},p=new(function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,[{key:"create",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=o.a.create(Object.assign.apply(Object,[{}].concat(t)));return Array.from(s).forEach((function(e){var t=Object(n.a)(e,2),r=(t[0],t[1]),i=r.interceptor,c=r.errorInterceptor;a.interceptors.request.use(i,c)})),Array.from(u).forEach((function(e){var t=Object(n.a)(e,2),r=(t[0],t[1]),i=r.interceptor,c=r.errorInterceptor;a.interceptors.response.use(i,c)})),a}},{key:"withSessionIdFromCookie",value:function(e){return this.create(e||{},{withCredentials:!0})}}]),e}());t.c=p},217:function(e,t){},219:function(e,t){},229:function(e,t){},23:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return f})),r.d(t,"a",(function(){return d})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return m})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return b}));var n=r(4),a=r(3),i=r(15),c=r(6),o=r(7),s=r(13),u=r(0),l=u.j({expires_in:u.f,access_token:u.i,refresh_token:u.i,is_comply:u.b,refresh_expires_in:u.f}),f=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(i.a)(n),r.prototype),n}return Object(n.a)(r)}(Object(s.a)(Error)),p=u.j({ban:u.i,banId:u.i,endDate:u.i}),d=u.c([u.j({userId:u.i,emailVerified:u.b,displayName:u.i,country:u.i,dateOfBirth:u.i,emailAddress:u.i,bans:u.k([u.e,u.a(p)])}),u.g({newEmailAddress:u.i,oldEmailAddress:u.i,deletionStatus:u.b})]),h=d,m=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(i.a)(n),r.prototype),n}return Object(n.a)(r)}(Object(s.a)(Error)),g=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(i.a)(n),r.prototype),n}return Object(n.a)(r)}(Object(s.a)(Error)),b=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(i.a)(n),r.prototype),n}return Object(n.a)(r)}(Object(s.a)(Error));u.j({ErrorCode:u.f,ErrorMessage:u.i}),u.j({errorCode:u.f,errorMessage:u.i})},231:function(e,t){},25:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(71),a=r(58),i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object.freeze(t.reduce((function(e,t){return Object(a.a)(Object(a.a)({},e),{},Object(n.a)({},t,t))}),Object.create(null)))}},258:function(e,t){},259:function(e,t){},264:function(e,t){},266:function(e,t){},273:function(e,t){},28:function(e,t,r){"use strict";r.d(t,"a",(function(){return L}));var n=r(3),a=r(4),i=r(6),c=r(7),o=r(12),s=r(169),u=r(5),l=new s.a({apiUrl:u.a,clientId:u.b,redirectURI:u.j}),f=r(2),p=r.n(f),d=r(8),h=r(11),m=r(21),g=r(17),b=r(15),v=r(13),y=r(0),O=r(14),C=y.c([y.j({currencyCode:y.i,currencySymbol:y.i,namespace:y.i,currencyType:y.d(O.b),decimals:y.f}),y.g({maxAmountPerTransaction:y.f,maxTransactionAmountPerDay:y.f,maxBalanceAmount:y.f,localizationDescriptions:y.h(y.i,y.i)})]),j=y.a(C),w=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(e){var a;return Object(n.a)(this,r),a=t.call(this,e),Object.setPrototypeOf(Object(b.a)(a),r.prototype),a}return Object(a.a)(r)}(Object(v.a)(Error));function E(){return k.apply(this,arguments)}function k(){return(k=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(g.a)((function(){return m.c.create().get(Object(h.a)(u.a,"platform/public/namespaces/".concat(u.h,"/currencies")))}),j,w,(function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=r(47),I=new(function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(){var e;return Object(n.a)(this,r),(e=t.call(this)).state={isFetching:!1,currencies:new Map,error:null},e.fetchCurrency(),e}return Object(a.a)(r,[{key:"fetchCurrency",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.isFetching){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.setState({isFetching:!0,error:null});case 5:return e.next=7,E().then((function(e){if(e.error)throw e.error;return S.a.currencyToMap(e.response.data)}));case 7:t=e.sent,this.setState({currencies:t,error:null}),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(2),e.next=15,this.setState({error:e.t0});case 15:return e.prev=15,e.next=18,this.setState({isFetching:!1});case 18:return e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[2,11,15,19]])})));return function(){return e.apply(this,arguments)}}()}]),r}(o.Container)),L=function(e){Object(i.a)(r,e);var t=Object(c.a)(r);function r(e){var a,i=e.history;return Object(n.a)(this,r),(a=t.call(this)).state={appHistory:i,userSession:l,currency:I,initialized:!1},[l].forEach((function(e){return e.subscribe((function(){return a.setState({})}))})),a}return Object(a.a)(r,[{key:"markInitialFetchDone",value:function(){this.setState({initialized:!0})}}]),r}(o.Container);t.b=function(e){return new L(e)}},292:function(e,t){},309:function(e,t,r){"use strict";r.r(t),r.d(t,"ElementSelector",(function(){return rt}));var n=r(1),a=r.n(n),i=r(60),c=r.n(i),o=r(12),s=r(31),u=r(96),l=r.n(u),f=r(2),p=r.n(f),d=r(8),h=r(3),m=r(4),g=r(6),b=r(7),v=r(28),y=function(e){Object(g.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).currentUserNeedAdministration=function(){var t=e.props.appState.state.userSession;return!!t.state.user&&(!!t.currentUserEmailNeedsVerification()||(!!t.currentUserIsHeadlessAccount()||(!!t.currentUserIsBlockedByLegal()||t.currentUserIsUnderDeletionStatus())))},e.hideLoadingIndicator=function(){var e;null===(e=document.getElementById("ajax-loading-screen"))||void 0===e||e.classList.remove("ab-wpr-loading-screen")},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.appState,e.t0=Promise,e.next=4,r.e(3).then(r.bind(null,315)).then((function(e){return e.default})).then(function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.t1=e.sent,e.t2=[e.t1],e.next=8,e.t0.all.call(e.t0,e.t2).then((function(){t.markInitialFetchDone(),(!t.state.userSession.state.user||t.state.userSession.state.user&&!t.state.userSession.currentUserNeedAdministration())&&n.hideLoadingIndicator()}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",null)}}]),n}(a.a.Component),O=function(){return a.a.createElement(o.Subscribe,{to:[v.a]},(function(e){return a.a.createElement(y,{appState:e})}))},C=r(16),j=r.n(C),w=r(62),E=r.n(w),k=function(e){var t=e.className;return a.a.createElement("i",{className:j()(t,E.a.loadingBarIcon)},a.a.createElement("div",{className:E.a.bar}),a.a.createElement("div",{className:E.a.bar}),a.a.createElement("div",{className:E.a.bar}))},S=function(){return n.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("mask",{id:"mask0",mask:"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"20",height:"20"},n.createElement("rect",{width:"20",height:"20",fill:"white"})),n.createElement("g",{mask:"url(#mask0)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0003 8.74998C11.1509 8.74998 12.0837 7.81724 12.0837 6.66665C12.0837 5.51605 11.1509 4.58331 10.0003 4.58331C8.84973 4.58331 7.91699 5.51605 7.91699 6.66665C7.91699 7.81724 8.84973 8.74998 10.0003 8.74998ZM10.0003 9.99998C11.8413 9.99998 13.3337 8.5076 13.3337 6.66665C13.3337 4.8257 11.8413 3.33331 10.0003 3.33331C8.15938 3.33331 6.66699 4.8257 6.66699 6.66665C6.66699 8.5076 8.15938 9.99998 10.0003 9.99998Z",fill:"white"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.6731 18C15.3838 18 15.16 17.7493 15.16 17.46C15.16 14.6102 12.8498 12.3 10 12.3C7.15025 12.3 4.84004 14.6102 4.84004 17.46C4.84004 17.7493 4.61625 18 4.32699 18H4.1029C3.79738 18 3.54004 17.7655 3.54004 17.46C3.54004 13.8922 6.43228 11 10 11C13.5678 11 16.46 13.8922 16.46 17.46C16.46 17.7655 16.2027 18 15.8972 18H15.6731Z",fill:"white"})))},I=function(){return n.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("mask",{id:"mask0",mask:"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"20",height:"20"},n.createElement("rect",{width:"20",height:"20",fill:"white"})),n.createElement("g",{mask:"url(#mask0)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.84049 4.94838C7.43342 5.51376 7.29161 6.21098 7.29161 6.66652V8.54153H12.7083V6.66652C12.7083 6.21098 12.5665 5.51376 12.1594 4.94838C11.7753 4.41487 11.1296 3.95819 9.99995 3.95819C8.87031 3.95819 8.22462 4.41487 7.84049 4.94838ZM6.04161 6.66652V8.54153H5.83333C5.02792 8.54153 4.375 9.19445 4.375 9.99987V15.8332C4.375 16.6386 5.02792 17.2915 5.83333 17.2915H14.1667C14.9721 17.2915 15.625 16.6386 15.625 15.8332V9.99987C15.625 9.19445 14.9721 8.54153 14.1667 8.54153H13.9583V6.66652C13.9583 6.01095 13.7668 5.04151 13.1738 4.218C12.5579 3.36262 11.537 2.70819 9.99995 2.70819C8.46291 2.70819 7.44194 3.36262 6.82607 4.218C6.23314 5.04151 6.04161 6.01095 6.04161 6.66652ZM5.83333 9.79153C5.71827 9.79153 5.625 9.88481 5.625 9.99987V15.8332C5.625 15.9483 5.71827 16.0415 5.83333 16.0415H14.1667C14.2817 16.0415 14.375 15.9483 14.375 15.8332V9.99987C14.375 9.88481 14.2817 9.79153 14.1667 9.79153H5.83333ZM11 12.3334C11 12.1493 10.5523 12 10 12C9.44772 12 9 12.1493 9 12.3334V13.6667C9 13.8508 9.44772 14 10 14C10.5523 14 11 13.8508 11 13.6667V12.3334Z",fill:"white"})))},L=function(){return n.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("mask",{id:"mask0",mask:"alpha",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"20",height:"20"},n.createElement("rect",{width:"20",height:"20",fill:"white"})),n.createElement("g",{mask:"url(#mask0)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.0234 15.3304C11.29 15.2292 11.5958 15.2778 11.7975 15.4796C12.1123 15.7944 12.0387 16.3236 11.626 16.4908C10.8151 16.8192 9.92866 17 9 17C5.13401 17 2 13.866 2 10C2 6.13401 5.13401 3 9 3C9.73593 3 10.4453 3.11357 11.1116 3.32413C11.5589 3.46548 11.6574 4.02469 11.3257 4.3564C11.1369 4.54521 10.8559 4.6023 10.5996 4.5275C10.0921 4.37941 9.55532 4.3 9 4.3C5.85198 4.3 3.3 6.85198 3.3 10C3.3 13.148 5.85198 15.7 9 15.7C9.71255 15.7 10.3946 15.5693 11.0234 15.3304ZM13.1832 6.18306C12.9391 6.42714 12.9391 6.82286 13.1832 7.06694L15.4496 9.33331H8.62516C8.27998 9.33331 8.00016 9.61313 8.00016 9.95831C8.00016 10.3035 8.27998 10.5833 8.62516 10.5833H15.4496L13.1832 12.8497C12.9391 13.0938 12.9391 13.4895 13.1832 13.7336C13.4273 13.9777 13.823 13.9777 14.0671 13.7336L17.4004 10.4003C17.4623 10.3384 17.5084 10.2669 17.5389 10.1905C17.567 10.1204 17.5827 10.044 17.5835 9.96409L17.5835 9.95831L17.5835 9.95629C17.583 9.79966 17.5249 9.65659 17.4292 9.54717C17.419 9.53549 17.4084 9.52419 17.3973 9.5133L14.0671 6.18306C13.823 5.93898 13.4273 5.93898 13.1832 6.18306Z",fill:"white"})))},x=r(11),A=r(5),P=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(){return Object(h.a)(this,r),t.apply(this,arguments)}return Object(m.a)(r,[{key:"render",value:function(){var e=this.props,t=e.appState,r=e.className,a=t.state.userSession;return a.state.user?n.createElement("div",{className:j()("ab-wpr-user-profile-dropdown-menu","ab-wpr-dropdown-menu",r)},n.createElement("div",{className:j()("ab-wpr-dropdown-wrapper ")},n.createElement("ul",null,n.createElement("li",null,n.createElement("a",{href:Object(x.a)(A.i,"account")},n.createElement(S,null),"My Account")),n.createElement("li",null,n.createElement("a",{href:Object(x.a)(A.i,"account/change-password")},n.createElement(I,null),"Change Password")),n.createElement("li",{className:"ab-wpr-has-separator ab-wpr-logout"},n.createElement("a",{onClick:function(){a.logout()}},n.createElement(L,null),"Logout"))))):null}}]),r}(n.Component),U=function(e){var t=e.className;return n.createElement(o.Subscribe,{to:[v.a]},(function(e){return n.createElement(P,{appState:e,className:t})}))},D=r(21),N=r(17),F=r(15),R=r(13),T=r(0),B=T.c([T.j({userId:T.i,namespace:T.i}),T.g({firstName:T.i,lastName:T.i,avatarSmallUrl:T.i,avatarUrl:T.i,avatarLargeUrl:T.i,language:T.i,timeZone:T.i,dateOfBirth:T.i})]),V=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(h.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(F.a)(n),r.prototype),n}return Object(m.a)(r)}(Object(R.a)(Error)),M=T.j({avatarUrl:T.i});function z(e,t){return W.apply(this,arguments)}function W(){return(W=Object(d.a)(p.a.mark((function e(t,r){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.namespace,a=Object(x.a)(A.a,"basic/v1/public/namespaces/".concat(n,"/users/me/profiles")),e.abrupt("return",Object(N.a)((function(){return t.get(a)}),B,V,(function(e){return e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return H.apply(this,arguments)}function H(){return(H=Object(d.a)(p.a.mark((function e(t,r){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.namespace,a=Object(x.a)(A.a,"bridge/v1/public/namespaces/".concat(n,"/users/me/profiles")),e.abrupt("return",Object(N.a)((function(){return t.get(a)}),M,V,(function(e){return e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(){var e;return Object(h.a)(this,r),(e=t.call(this)).fetchProfile=Object(d.a)(p.a.mark((function t(){var r,n,a,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.isFetching){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.setState({isFetching:!0,error:null});case 4:return t.prev=4,n=D.c.withSessionIdFromCookie(),t.next=8,z(n,{namespace:A.h}).then((function(e){if(e.error)throw e.error;return e.response.data}));case 8:return a=t.sent,t.next=11,_(n,{namespace:A.h});case 11:if(!(i=t.sent).error){t.next=14;break}throw i.error;case 14:a.avatarUrl=null===(r=i.response)||void 0===r?void 0:r.data.avatarUrl,e.setState({profile:a,error:null}),t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(4),t.next=22,e.setState({error:t.t0});case 22:return t.prev=22,t.next=25,e.setState({isFetching:!1});case 25:return t.finish(22);case 26:case"end":return t.stop()}}),t,null,[[4,18,22,26]])}))),e.state={profile:void 0,isFetching:!1,error:void 0},e}return Object(m.a)(r,[{key:"init",value:function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchProfile();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(o.Container),Z=r(33),J=r(173),Y=r.n(J),Q=p.a.mark(X);function X(){var e,t;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e=10,t=0;case 2:return r.next=5,String(t);case 5:t=(t+1)%e,r.next=2;break;case 8:case"end":return r.stop()}}),Q)}var K=function(e,t){return function(r){Object(g.a)(i,r);var a=Object(b.a)(i);function i(e){var t;return Object(h.a)(this,i),(t=a.call(this,e)).refresh=function(){t.setState({key:t.state.keygen.next().value})},t.state={keygen:X(),oldProps:e,key:"1"},t}return Object(m.a)(i,[{key:"render",value:function(){return n.createElement(e,Object.assign({key:this.state.key,propsGuardRefresh:this.refresh},this.props),this.props.children)}}],[{key:"getDerivedStateFromProps",value:function(e,r){return t(r.oldProps,e)?{key:r.keygen.next().value,oldProps:e}:null}}]),i}(n.Component)},q=K(function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(h.a)(this,r),(n=t.call(this,e)).state={imageLoaded:!1,isLoadingImage:!1,error:void 0},n}return Object(m.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props.imageUrl;this.state.isLoadingImage||(this.setState({isLoadingImage:!0}),Object(Z.b)(t).then((function(){e.setState({imageLoaded:!0})})).finally((function(){e.setState({isLoadingImage:!1})})))}},{key:"render",value:function(){var e=this.props,t=e.imageUrl,r=e.isLoading,a=e.className,i=this.state,c=i.isLoadingImage,o=i.imageLoaded;return n.createElement("div",{className:a},(c||r)&&n.createElement(k,null),!c&&!r&&n.createElement("img",{src:o?t:Y.a}))}}]),r}(n.Component),(function(e,t){return e.isLoading!==t.isLoading||e.imageUrl!==t.imageUrl})),$={min:1241,max:1/0},ee={min:1120,max:1240},te=r(23),re=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(h.a)(this,r),(n=t.call(this,e)).userProfileLogic=void 0,n.userProfileLogic=new G,n.userProfileLogic.subscribe((function(){return n.setState({})})),n}return Object(m.a)(r,[{key:"componentDidMount",value:function(){this.userProfileLogic.init()}},{key:"render",value:function(){var e=this,t=this.props,r=t.appState,a=t.isPageScrollOnTop,i=t.screenWidth,c=r.state.userSession.state,o=c.user,s=c.isFetching,u=c.error,l=this.userProfileLogic.state,f=l.profile,p=l.isFetching,d=l.error;if(s)return n.createElement("div",{className:"ab-wpr-user-profile-button"},n.createElement(k,null));if(!o||u)return n.createElement("div",{className:"ab-wpr-user-profile-button"},n.createElement("button",{onClick:function(){r.state.userSession.fetchCurrentUser()},className:j()("nectar-button","medium regular","accent-color","regular-button","ab-wpr-login-button")},"Failed Fetching profile, Try again "));if(!te.a.is(o))return null;if(void 0===f&&!p&&d){var h=localStorage.getItem("PD3CustomRedirect");if(h)return localStorage.removeItem("PD3CustomRedirect"),void(window.location.href="".concat(A.i,"?PD3CustomRedirect=").concat(h));window.location.href=A.i}return n.createElement("div",{className:j()("ab-wpr-user-profile-button",{scrolled:!a}),onMouseEnter:function(){return e.setState({showDropdown:!0})},onMouseLeave:function(){return e.setState({showDropdown:!1})}},n.createElement(q,{isLoading:p,imageUrl:f?f.avatarUrl:"",className:j()("ab-wpr-avatar",{large:i>=ee.max},{scrolled:!a})}),i>=$.min&&n.createElement("div",{className:j()("ab-wpr-display-name",{scrolled:!a}),onClick:this.userProfileLogic.fetchProfile},o.displayName),n.createElement(U,{className:j()({scrolled:!a},{large:i>=$.min})}))}}]),r}(n.Component),ne=function(e){var t=e.screenWidth,r=e.isPageScrollOnTop;return n.createElement(o.Subscribe,{to:[v.a]},(function(e){return n.createElement(re,{appState:e,isPageScrollOnTop:r,screenWidth:t})}))},ae=r(115),ie=r(59),ce=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(h.a)(this,r),(n=t.call(this,e)).register=function(){n.goToWebsiteUrl({payload:{path:"/"},targetAuthPage:ie.b.register})},n.reportScrollPosition=function(){document.scrollingElement&&n.setState({isPageScrollOnTop:0===document.scrollingElement.scrollTop})},n.reportScreenWidth=function(){n.setState({screenWidth:window.innerWidth})},n.goToWebsiteUrl=function(e){var t=n.props.appState.state,r=t.userSession,a=t.initialized;if(r.state.user&&A.c)window.location.replace("".concat(A.i));else if(a&&!r.state.user&&!n.state.isRedirectingToAuthorizeUrl){n.setState({isRedirectingToAuthorizeUrl:!0});var i=ae.a.createLoginWebsiteUrl(e);window.location.replace(i)}},n.goToLogin=function(){var e=n.props.appState.state.appHistory;n.goToWebsiteUrl({payload:{path:A.g?"/":e.location.pathname}})},n.state={isPageScrollOnTop:!0,screenWidth:window.innerWidth,isRedirectingToAuthorizeUrl:!1},n}return Object(m.a)(r,[{key:"componentDidMount",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.reportScrollPosition(),this.reportScreenWidth(),window.addEventListener("resize",this.reportScreenWidth,{passive:!0}),window.addEventListener("scroll",this.reportScrollPosition,{passive:!0}),window.registerPD3WithCustomRedirect=function(){localStorage.setItem("PD3CustomRedirect",document.location.href),t.register()};case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.reportScreenWidth),window.removeEventListener("scroll",this.reportScrollPosition)}},{key:"render",value:function(){var e=this.props,t=e.appState,r=e.isMobile,n=this.state,i=n.isPageScrollOnTop,c=n.screenWidth,o=n.isRedirectingToAuthorizeUrl,s=t.state,u=s.userSession,l=s.initialized,f=!!u.state.user,p=u.state.isFetching,d=u.state.isLoggingOut;return A.k&&window.location.pathname===A.k&&this.register(),A.g&&window.location.pathname===A.g&&this.goToLogin(),A.e&&window.location.pathname===A.e&&this.goToWebsiteUrl({payload:{path:"/"},targetAuthPage:ie.b.forgotPassword}),r&&f?null:a.a.createElement(a.a.Fragment,null,!r&&a.a.createElement("span",{className:j()("ab-wpr-vertical-line-separator",{scrolled:!i})}),a.a.createElement("div",{className:"ab-wpr-login-button-container"},(!l||o||!f&&p||d)&&a.a.createElement(k,{className:j()("ab-wpr-loading-indicator",{scrolled:!i})}),l&&f&&!p&&!d&&!o&&a.a.createElement(ne,{isPageScrollOnTop:i,screenWidth:c}),l&&!f&&!p&&!d&&!o&&a.a.createElement("button",{onClick:this.goToLogin,className:j()("nectar-button","medium regular","accent-color","regular-button","ab-wpr-login-button",{disabled:!l},{scrolled:!i})},"Nebula")))}}]),r}(a.a.Component),oe=function(e){var t=e.isMobile;return a.a.createElement(o.Subscribe,{to:[v.a]},(function(e){return a.a.createElement(ce,{appState:e,isMobile:t})}))},se=r(34),ue=T.j({City:T.i,CountryCode:T.i,CountryName:T.i,State:T.i}),le=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(h.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(F.a)(n),r.prototype),n}return Object(m.a)(r)}(Object(R.a)(Error));function fe(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(d.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(x.a)(A.a,"/iam/v3/location/country"),e.abrupt("return",Object(N.a)((function(){return t.get(r)}),ue,le,(function(e){return e})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t){t.namespace;var r=t.countryCode,n=t.defaultOnEmpty,a=t.tags,i=t.policyType,c=Object(x.a)(A.a,"/agreement/public/policies/countries/".concat(r)),o={defaultOnEmpty:n,policyType:i};return Array.isArray(a)&&a.length>0&&(o.tags=a.join(",")),Object(N.a)((function(){return e.get(c,{params:o})}),se.b,se.c,(function(e){return e}))}var he=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(h.a)(this,r),(n=t.call(this)).props=void 0,n.fetchData=function(){n.fetchGeoLocation().then(n.fetchPoliciesByCountryCode)},n.fetchGeoLocation=Object(d.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.isFetchingGeoLocation){e.next=2;break}return e.abrupt("return",void 0);case 2:return n.setState({isFetchingGeoLocation:!0}),e.prev=3,t=D.c.create(),e.next=7,fe(t).then((function(e){if(e.error)throw e.error;return e.response.data}));case 7:return r=e.sent,e.abrupt("return",r.CountryCode);case 11:return e.prev=11,e.t0=e.catch(3),e.abrupt("return",void 0);case 14:return e.prev=14,n.setState({isFetchingGeoLocation:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])}))),n.fetchPoliciesByCountryCode=Object(d.a)(p.a.mark((function e(){var t,r,a,i,c=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:"US",r=n.props.namespace,!n.state.isFetchingPolicies){e.next=4;break}return e.abrupt("return");case 4:return n.setState({isFetchingPolicies:!0,fetchPoliciesError:null,policies:null}),e.prev=5,a=D.c.create(),e.next=9,de(a,{namespace:r,countryCode:t,defaultOnEmpty:!0,policyType:se.d.LEGAL_DOCUMENT_TYPE,tags:[se.e.FOOTER]}).then((function(e){if(e.error)throw e.error;return e.response.data}));case 9:i=e.sent,n.setState({policies:i,fetchPoliciesError:null}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),n.setState({policies:null,fetchPoliciesError:e.t0});case 16:return e.prev=16,n.setState({isFetchingPolicies:!1}),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[5,13,16,19]])}))),n.getAllMandatoryPolicy=function(){var e=n.state,t=e.policies,r=e.fetchPoliciesError;if(!n.isLoading()&&!r&&t){var a=[];return t.map((function(e){var t=e.id,r=e.policyName,n=e.policyVersions;if(n&&n.length&&e.isMandatory){var i=n[0],c=i.id;if(i.localizedPolicyVersions&&i.localizedPolicyVersions.length){var o=i.localizedPolicyVersions.find((function(e){return!0===e.isDefaultSelection}));o&&a.push({policyName:r,policyVersionId:c,policyId:t,localizedPolicyVersionId:o.id})}}})),a}},n.props=e,n.state={isFetchingGeoLocation:!1,isFetchingPolicies:!1,policies:null,fetchPoliciesError:null},n}return Object(m.a)(r,[{key:"init",value:function(){this.fetchData()}},{key:"isLoading",value:function(){var e=this.state,t=e.isFetchingGeoLocation,r=e.isFetchingPolicies;return t||r}}]),r}(o.Container),me=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(h.a)(this,r),(a=t.call(this,e)).privacyLinkLogic=void 0,a.fetchLegalDocument=function(){a.privacyLinkLogic.fetchData()},a.renderPolicyLink=function(){var e=a.privacyLinkLogic.getAllMandatoryPolicy();return e?n.createElement(n.Fragment,null,e.map((function(e){return n.createElement("a",{href:Object(x.a)(A.f,e.localizedPolicyVersionId)},e.policyName)}))):null},a.privacyLinkLogic=new he({namespace:A.h}),a.privacyLinkLogic.subscribe((function(){return a.setState({})})),a}return Object(m.a)(r,[{key:"componentDidMount",value:function(){this.privacyLinkLogic.init()}},{key:"render",value:function(){var e=this.privacyLinkLogic.state.fetchPoliciesError,t=this.privacyLinkLogic.isLoading();return t?n.createElement("div",null,n.createElement(k,{className:"ab-wpr-footer-policy-loading"})):!t&&e?n.createElement("span",null,"Cannot load legal information ",n.createElement("a",{href:"javascript:void(0)",onClick:this.fetchLegalDocument},"Try Again")):this.renderPolicyLink()}}]),r}(n.Component),ge=r(14);var be=T.g({as:T.i,caption:T.i,height:T.f,imageUrl:T.i,smallImageUrl:T.i,width:T.f}),ve=Object.freeze({largeButtonImg:"purchase-btn-img-area",largeButtonBgBtn:"purchase-btn-bg"}),ye=(Error,T.c([T.j({price:T.f,currencyNamespace:T.i,currencyCode:T.i,currencyType:T.d(ge.b),discountedPrice:T.f}),T.g({discountPercentage:T.f,discountAmount:T.f,purchaseAt:T.i,expireAt:T.i,discountPurchaseAt:T.i,discountExpireAt:T.i})])),Oe=T.c([T.j({itemId:T.i,itemType:T.d(ge.g)}),T.g({appId:T.i,baseAppId:T.i,appType:T.d(ge.a),namespace:T.i,sku:T.i,name:T.i,title:T.i,description:T.i,longDescription:T.i,entitlementType:T.d(ge.e),useCount:T.f,categoryPath:T.i,status:T.d(ge.f),targetCurrencyCode:T.i,targetNamespace:T.i,regionData:T.a(ye),itemIds:T.a(T.i),tags:T.a(T.i),maxCountPerUser:T.f,maxCount:T.f,clazz:T.i,codeFiles:T.a(T.i),createdAt:T.i,updatedAt:T.i,images:T.a(be)})]),Ce=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(h.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(F.a)(n),r.prototype),n}return Object(m.a)(r)}(Object(R.a)(Error)),je=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(h.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(F.a)(n),r.prototype),n}return Object(m.a)(r)}(Object(R.a)(Error)),we=r(58),Ee=T.g({previous:T.i,next:T.i}),ke=T.g({thumbnailImage:be,itemType:T.d(ge.g),itemId:T.i,title:T.i,regionDataItem:ye}),Se=(Error,T.c([T.j({id:T.i,itemId:T.i}),T.g({namespace:T.i,targetNamespace:T.i,clazz:T.d(ge.c),type:T.d(ge.e),status:T.d(ge.d),appId:T.i,appType:T.i,sku:T.i,userId:T.i,bundleItemId:T.i,grantedCode:T.i,itemNamespace:T.i,name:T.i,useCount:T.f,quantity:T.f,distributedQuantity:T.f,itemSnapshot:ke})])),Ie=T.j({data:T.a(Se),paging:Ee}),Le=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(h.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(F.a)(n),r.prototype),n}return Object(m.a)(r)}(Object(R.a)(Error));function xe(e,t,r){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(d.a)(p.a.mark((function e(t,r,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(N.a)((function(){return t.get(Object(x.a)(A.a,"platform/public/namespaces/".concat(A.h,"/users/").concat(r,"/entitlements")),{params:Object(we.a)({},n)})}),Ie,Le,(function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t,r){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(d.a)(p.a.mark((function e(t,r,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xe(t,r,{itemId:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e,t,r){var n=D.c.create();return Object(N.a)((function(){return n.get(Object(x.a)(A.a,"platform/public/namespaces/".concat(A.h,"/items/").concat(e,"/locale")),{params:{region:t,language:r}})}),Oe,Ce,(function(e){return e}))}var Ne=r(313),Fe=r(314),Re=function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,null,[{key:"extractActiveRegionData",value:function(e){var t=this,r=new Date;return(e.regionData||[]).filter((function(e){return t.isPurchasable(e,r)}))}},{key:"isPurchasable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return!this.isExpired(e,t)&&!this.isNotAvailableYet(e,t)}},{key:"isDiscounted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,r=e.price,n=e.discountedPrice;return r!==n&&(!this.isDiscountExpired(e,t)&&!this.isDiscountNotAvailableYet(e,t))}},{key:"isExpired",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return void 0!==e.expireAt&&Ne.a(t,new Date(e.expireAt))}},{key:"isNotAvailableYet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return void 0!==e.purchaseAt&&Fe.a(t,new Date(e.purchaseAt))}},{key:"isDiscountExpirable",value:function(e){return void 0!==e.discountExpireAt}},{key:"isDiscountNotAvailableYet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return void 0!==e.discountPurchaseAt&&Fe.a(t,new Date(e.discountPurchaseAt))}},{key:"isDiscountExpired",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return void 0!==e.discountExpireAt&&Ne.a(t,new Date(e.discountExpireAt))}},{key:"hasMatchingCurrencyInMap",value:function(e,t){return!!t.get(e.currencyCode)}},{key:"calculateDiscountPercentage",value:function(e){var t=e.price,r=e.discountedPrice;return 0===t?0:Math.floor((t-r)/t*100)}},{key:"isCurrencyTypeVirtual",value:function(e){return e.currencyType===ge.b.VIRTUAL}},{key:"getFinalPrice",value:function(e){return this.isDiscounted(e)?e.discountedPrice:e.price}},{key:"finalPriceIsFree",value:function(e){return this.getFinalPrice(e)<=0}},{key:"getFirstFreeRegionDatum",value:function(e){var t=this;return e.find((function(e){return t.isPurchasable(e)&&t.finalPriceIsFree(e)}))||null}},{key:"getFirstNotFreeRegionDatum",value:function(e){var t=this;return e.find((function(e){return t.isPurchasable(e)&&!t.finalPriceIsFree(e)}))||null}},{key:"getFinalRegionDatum",value:function(e){return this.isFree(e)?this.getFirstFreeRegionDatum(e):this.getFirstNotFreeRegionDatum(e)}},{key:"isFree",value:function(e){return!!this.getFirstFreeRegionDatum(e)}}]),e}(),Te=Object(m.a)((function e(){Object(h.a)(this,e)}));Te.isItemPurchaseAble=function(e){return!!Re.getFinalRegionDatum(e.regionData||[])&&!(0===e.maxCountPerUser||0===e.maxCount||e.status!==ge.f.ACTIVE)},Te.isItemPurchaseAbleWithEntitlementCheck=function(e,t){return!(!Te.isItemPurchaseAble(e)||!e.maxCountPerUser)&&(-1===e.maxCountPerUser||Te.getItemEntitlementCount(e.itemId,t)<e.maxCountPerUser)},Te.getItemEntitlementCount=function(e,t){return t.filter((function(t){return t.itemId===e})).length};var Be=function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,null,[{key:"getBackgroundImage",value:function(e){return e.find((function(e){return e.as===ve.largeButtonImg}))}},{key:"getButtonBackgroundImage",value:function(e){return e.find((function(e){return e.as===ve.largeButtonBgBtn}))}},{key:"isItemTypeSupported",value:function(e){return[ge.g.COINS,ge.g.APP,ge.g.CODE,ge.g.BUNDLE].includes(e.itemType)}}]),e}(),Ve="large",Me=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(h.a)(this,r),(n=t.call(this)).props=void 0,n.init=function(){n.fetchEntitlement(),n.fetchItem()},n.fetchItem=Object(d.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=n.props.itemId)&&!n.state.isFetchingItem){e.next=3;break}return e.abrupt("return");case 3:return n.setState({isFetchingItem:!0}),e.prev=4,e.next=7,De(t).then((function(e){if(e.error)throw e.error;if(!Be.isItemTypeSupported(e.response.data))throw new je;return e.response.data}));case 7:r=e.sent,n.setState({item:r,fetchItemError:null}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),n.setState({fetchItemError:e.t0,item:null});case 14:return e.prev=14,n.setState({isFetchingItem:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,11,14,17]])}))),n.fetchEntitlement=Object(d.a)(p.a.mark((function e(){var t,r,a,i,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,r=t.user,a=t.itemId,r&&te.a.is(r)&&a&&!n.state.isFetchingEntitlement){e.next=3;break}return e.abrupt("return");case 3:return n.setState({isFetchingEntitlement:!0}),e.prev=4,i=D.c.withSessionIdFromCookie(),e.next=8,Pe(i,r.userId,a).then((function(e){if(e.error)throw e.error;return e.response.data.data}));case 8:c=e.sent,n.setState({itemEntitlement:c,fetchEntitlementError:null}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),n.setState({fetchEntitlementError:e.t0,itemEntitlement:[]});case 15:return e.prev=15,n.setState({isFetchingEntitlement:!1}),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,12,15,18]])}))),n.isLoading=function(){var e=n.state,t=e.isFetchingItem,r=e.isFetchingEntitlement;return t||r},n.isError=function(){var e=n.state,t=e.fetchItemError,r=e.fetchEntitlementError;return!!t||!!r},n.isItemOwned=function(){var e=n.state,t=e.item,r=e.itemEntitlement;return!(!t||!r||n.isError()||n.isLoading())&&Te.getItemEntitlementCount(t.itemId,r)>0},n.isItemPurchaseAble=function(){var e=n.state,t=e.item,r=e.itemEntitlement;return!(!t||n.isError()||n.isLoading())&&(r?Te.isItemPurchaseAbleWithEntitlementCheck(t,r):Te.isItemPurchaseAble(t))},n.props=e,n.state={item:null,isFetchingItem:!1,fetchItemError:null,itemEntitlement:[],isFetchingEntitlement:!1,fetchEntitlementError:null},n}return Object(m.a)(r)}(o.Container),ze=r(47),We=function(){return n.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 2H5C3.3 2 2 3.3 2 5V19C2 20.7 3.3 22 5 22H19C20.7 22 22 20.7 22 19V5C22 3.3 20.7 2 19 2ZM4 5C4 4.4 4.4 4 5 4H19C19.6 4 20 4.4 20 5V12.6L16.7 9.3C16.3 8.9 15.7 8.9 15.3 9.3L4.7 19.9C4.3 19.8 4 19.4 4 19V5ZM7.4 20H19C19.6 20 20 19.6 20 19V15.4L16 11.4L7.4 20ZM8.5 11C9.9 11 11 9.9 11 8.5C11 7.1 9.9 6 8.5 6C7.1 6 6 7.1 6 8.5C6 9.9 7.1 11 8.5 11ZM9 8.5C9 8.2 8.8 8 8.5 8C8.2 8 8 8.2 8 8.5C8 8.8 8.2 9 8.5 9C8.8 9 9 8.8 9 8.5Z",fill:"#D92130"}))},_e=function(){return n.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M32.0799 8.6632C32.3827 8.73061 32.7352 8.82669 33.0349 8.97893C33.5686 9.24996 33.9755 9.68178 34.2836 10.0891C34.6069 10.5165 34.9028 11.0275 35.1727 11.5758C35.7133 12.6739 36.2032 14.032 36.6152 15.4267C37.4334 18.1964 38.0002 21.3041 38 23.0809C37.9998 24.7014 37.9628 26.5163 37.4861 28.0645C36.9981 29.6494 35.9827 31.1519 33.8915 31.8176C32.26 32.3369 30.863 31.6628 29.9147 30.8564C28.9706 30.0536 28.1992 28.918 27.6025 27.851C26.9943 26.7636 26.5143 25.6494 26.1882 24.8158C26.1082 24.6112 26.037 24.4224 25.9751 24.2536H15.0942C15.0369 24.4069 14.9716 24.5768 14.8988 24.76C14.5806 25.5608 14.1103 26.6342 13.5085 27.6941C12.9159 28.7377 12.1518 29.8484 11.2163 30.6631C10.2874 31.4721 8.95875 32.1738 7.35224 31.8609C5.09882 31.422 3.75361 29.9432 3.00053 28.3213C2.25197 26.7092 2 24.7954 2 23.0808C2 21.3041 2.56662 18.1965 3.3847 15.4268C3.79664 14.0321 4.28645 12.6739 4.82709 11.5758C5.097 11.0275 5.39292 10.5165 5.7163 10.0891C6.02448 9.68169 6.43145 9.24986 6.96521 8.97885C7.26495 8.82666 7.61739 8.7306 7.92025 8.66319C8.24658 8.59055 8.62432 8.52828 9.03351 8.47378C9.85312 8.36461 10.876 8.27665 12.0184 8.20738C14.3078 8.06857 17.1602 8 20.0002 8C22.8402 8 25.6926 8.06857 27.9819 8.20738C29.1243 8.27666 30.1472 8.36462 30.9667 8.47378C31.3759 8.52828 31.7536 8.59056 32.0799 8.6632ZM12.7885 22.7705L13.061 21.908H28.016L28.2865 22.7736L28.2876 22.7771L28.2925 22.7925L28.314 22.8587C28.3334 22.9179 28.363 23.0067 28.4023 23.1203C28.481 23.3477 28.5981 23.6738 28.7501 24.0625C29.0558 24.8441 29.4949 25.8591 30.0365 26.8275C30.5896 27.8163 31.1987 28.663 31.8088 29.1818C32.4147 29.697 32.7457 29.6836 32.9592 29.6157C33.916 29.3111 34.5115 28.6319 34.8724 27.4595C35.2447 26.2506 35.2946 24.7327 35.2948 23.0807C35.2949 21.5851 34.7876 18.6932 33.9946 16.0087C33.601 14.6764 33.151 13.4438 32.6847 12.4966C32.4511 12.0222 32.2268 11.6469 32.0215 11.3755C31.9198 11.241 31.8326 11.1453 31.7631 11.0805C31.7156 11.0362 31.6848 11.0143 31.6723 11.0061L31.6685 11.0048C31.6462 10.9973 31.5684 10.971 31.4072 10.9351C31.1976 10.8884 30.9145 10.8399 30.556 10.7922C29.8401 10.6968 28.8995 10.6143 27.7932 10.5473C25.5851 10.4134 22.7989 10.3456 20.0002 10.3456C17.2016 10.3456 14.4154 10.4134 12.2072 10.5473C11.1008 10.6143 10.1602 10.6968 9.44424 10.7922C9.08563 10.8399 8.80256 10.8885 8.5929 10.9351C8.43149 10.971 8.35367 10.9973 8.33141 11.0048L8.3269 11.0064L8.33162 11.0033L8.332 11.0031C8.33214 11.003 8.3322 11.003 8.3322 11.0029C8.32709 11.0055 8.32439 11.0069 8.32448 11.007L8.3269 11.0064C8.3154 11.014 8.28521 11.0354 8.23667 11.0806C8.1672 11.1453 8.08 11.2411 7.97828 11.3756C7.773 11.6469 7.54866 12.0222 7.3151 12.4966C6.84882 13.4438 6.39887 14.6763 6.00533 16.0087C5.21245 18.6931 4.7052 21.5851 4.7052 23.0808C4.7052 24.6387 4.94075 26.2194 5.50999 27.4453C6.0747 28.6615 6.87753 29.3644 7.94517 29.5723C8.23755 29.6293 8.66386 29.5615 9.29925 29.0081C9.92808 28.4605 10.5376 27.6159 11.0814 26.6581C11.6159 25.7167 12.0445 24.7424 12.3412 23.9959C12.4887 23.6246 12.6019 23.3142 12.6776 23.0982C12.7154 22.9903 12.7438 22.9062 12.7624 22.8502L12.7829 22.7879L12.7875 22.7735L12.7885 22.7705ZM12.5002 12.7C13.2182 12.7 13.8002 13.282 13.8002 14V15.2H15.0002C15.7182 15.2 16.3002 15.7821 16.3002 16.5C16.3002 17.218 15.7182 17.8 15.0002 17.8H13.8002V19C13.8002 19.7179 13.2182 20.3 12.5002 20.3C11.7822 20.3 11.2002 19.7179 11.2002 19V17.8H10.0002C9.28222 17.8 8.7002 17.218 8.7002 16.5C8.7002 15.7821 9.28222 15.2 10.0002 15.2H11.2002V14C11.2002 13.282 11.7822 12.7 12.5002 12.7ZM27.0002 12.7C27.7182 12.7 28.3002 13.282 28.3002 14V15.2H29.5002C30.2182 15.2 30.8002 15.7821 30.8002 16.5C30.8002 17.218 30.2182 17.8 29.5002 17.8H28.3002V19C28.3002 19.7179 27.7182 20.3 27.0002 20.3C26.2822 20.3 25.7002 19.7179 25.7002 19V17.8H24.5002C23.7822 17.8 23.2002 17.218 23.2002 16.5C23.2002 15.7821 23.7822 15.2 24.5002 15.2H25.7002V14C25.7002 13.282 26.2822 12.7 27.0002 12.7Z",fill:"#D92130"}))},He=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(h.a)(this,r),(n=t.call(this,e)).getBackgroundImage=function(){var e=n.props.item,t=n.state,r=t.imageLoaded,a=t.loadImageError;if(e&&r&&!a)return(Be.getBackgroundImage(e.images||[])||{}).imageUrl},n.loadImage=function(){var e=n.props.item;if(!n.state.isLoadingImage&&e){var t=Be.getBackgroundImage(e.images||[]);t&&n.setState({isLoadingImage:!0,loadImageError:null,imageLoaded:!1},(function(){Object(Z.b)(t.imageUrl).then((function(){return n.setState({imageLoaded:!0,loadImageError:null})})).catch((function(e){return n.setState({imageLoaded:!1,loadImageError:e})})).finally((function(){return n.setState({isLoadingImage:!1})}))}))}},n.state={imageLoaded:!1,isLoadingImage:!1,loadImageError:null},n}return Object(m.a)(r,[{key:"componentDidMount",value:function(){this.loadImage()}},{key:"render",value:function(){var e=this.props.item,t=this.state,r=t.isLoadingImage,a=t.imageLoaded,i={};return a&&(i.backgroundImage="url(".concat(this.getBackgroundImage(),")")),n.createElement("div",{className:"ab-wpr-purchase-large-container-img ab-wpr-stripe-bg",style:i},r&&n.createElement(k,null),!r&&!e&&n.createElement("span",null,n.createElement(We,null),n.createElement("p",null,"Error fetching Item Information")),!r&&!!e&&!a&&n.createElement("span",null,n.createElement(_e,null)))}}]),r}(n.Component),Ge=function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var n;return Object(h.a)(this,r),(n=t.call(this,e)).getBackgroundImage=function(){var e=n.props.item,t=n.state,r=t.imageLoaded,a=t.loadImageError;if(e&&r&&!a)return(Be.getButtonBackgroundImage(e.images||[])||{}).imageUrl},n.loadImage=function(){var e=n.props.item;if(!n.state.isLoadingImage&&e){var t=Be.getButtonBackgroundImage(e.images||[]);t&&n.setState({isLoadingImage:!0,loadImageError:null,imageLoaded:!1},(function(){Object(Z.b)(t.imageUrl).then((function(){return n.setState({imageLoaded:!0,loadImageError:null})})).catch((function(e){return n.setState({imageLoaded:!1,loadImageError:e})})).finally((function(){return n.setState({isLoadingImage:!1})}))}))}},n.state={imageLoaded:!1,isLoadingImage:!1,loadImageError:null},n}return Object(m.a)(r,[{key:"componentDidMount",value:function(){this.loadImage()}},{key:"render",value:function(){var e=this.props,t=e.item,r=e.text,a=e.onClickActionOrLink,i=e.style,c=this.state,o=c.imageLoaded,s=c.isLoadingImage,u={};return o&&"large"===i&&(u.backgroundImage="url(".concat(this.getBackgroundImage(),")")),n.createElement("div",{className:j()("ab-wpr-purchase-btn-container",{"ab-wpr-purchase-btn-action-large":"large"===i})},s&&n.createElement(k,null),"string"===typeof a&&!s&&n.createElement("a",{style:u,className:j()("ab-wpr-purchase-btn-action",{"ab-wpr-purchase-btn-action-large":"large"===i&&!!t&&o}),href:a},n.createElement("span",null,r)),"string"!==typeof a&&!s&&n.createElement("button",{style:u,className:j()("ab-wpr-purchase-btn-action",{"ab-wpr-purchase-btn-action-large":"large"===i&&!!t&&o}),onClick:a,disabled:!a},n.createElement("span",null,r)))}}]),r}(n.Component);Ge.defaultProps={style:"default"};var Ze=function(e){var t=e.item,r=e.currencies,a=Re.getFinalRegionDatum(t.regionData||[]);if(!a)return null;var i=Re.finalPriceIsFree(a),c=r.get(a.currencyCode);return c?n.createElement(n.Fragment,null,n.createElement(He,{item:t}),n.createElement(Ge,{item:t,text:i?"Play For Free":"Buy Now ".concat(a.currencyCode," ").concat(ze.a.calculateIntegerPrice(Re.getFinalPrice(a),c)),onClickActionOrLink:Object(x.b)(t.itemId,window.location.href),style:"large"})):null},Je=function(e){return n.createElement(n.Fragment,null,n.createElement(He,{item:null}),n.createElement(Ge,{text:"Retry",onClickActionOrLink:e.onRetry,style:"large"}))},Ye=function(e){var t=e.item;return n.createElement(n.Fragment,null,n.createElement(He,{item:t}),n.createElement(Ge,{item:t,text:"This Item is Not Yet Available",style:"large"}))},Qe=function(e){var t=e.item;return n.createElement(n.Fragment,null,n.createElement(He,{item:t}),n.createElement(Ge,{item:t,text:"Item Already Owned",style:"large"}))},Xe=function(e){var t=e.item,r=e.currencies,a=Re.getFinalRegionDatum(t.regionData||[]);if(!a)return null;var i=Re.finalPriceIsFree(a),c=r.get(a.currencyCode);return c?n.createElement(Ge,{text:i?"Play For Free":"Buy Now ".concat(a.currencyCode," ").concat(ze.a.calculateIntegerPrice(Re.getFinalPrice(a),c)),onClickActionOrLink:Object(x.b)(t.itemId,window.location.href)}):null},Ke=function(e){return n.createElement(n.Fragment,null,n.createElement("span",{className:"ab-wpr-purchase-error-message"},"Error Fetching Item Information"),n.createElement(Ge,{text:"Retry",onClickActionOrLink:e.onRetry}))},qe=function(){return n.createElement(Ge,{text:"This Item is Not Yet Available"})},$e=function(){return n.createElement(Ge,{text:"Item Already Owned"})},et=K(function(e){Object(g.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(h.a)(this,r),(a=t.call(this,e)).logic=void 0,a.renderPurchaseButton=function(){var e=a.props,t=e.buttonStyle,r=e.currency.state.currencies,i=a.logic.state.item;if(!i)return null;switch(t){case Ve:return n.createElement(Ze,{currencies:r,item:i});default:return n.createElement(Xe,{currencies:r,item:i})}},a.renderButton=function(){var e=a.props.buttonStyle,t=a.logic.state.item;if(!t)return null;if(!a.logic.isItemPurchaseAble()){if(a.logic.isItemOwned())switch(e){case Ve:return n.createElement(Qe,{item:t});default:return n.createElement($e,null)}switch(e){case Ve:return n.createElement(Ye,{item:t});default:return n.createElement(qe,null)}}return a.renderPurchaseButton()},a.errorAction=function(){var e=a.props.currency;e.state.error&&e.fetchCurrency(),a.logic.state.fetchEntitlementError&&a.logic.fetchEntitlement(),a.logic.state.fetchItemError&&a.logic.fetchItem()},a.renderError=function(){switch(a.props.buttonStyle){case Ve:return n.createElement(Je,{onRetry:a.errorAction});default:return n.createElement(Ke,{onRetry:a.errorAction})}},a.logic=new Me({user:e.user,itemId:e.itemId}),a.logic.subscribe((function(){return a.setState({})})),a.props.currency.subscribe((function(){return a.setState({})})),a}return Object(m.a)(r,[{key:"componentDidMount",value:function(){this.logic.init()}},{key:"render",value:function(){var e=this.props,t=e.currency,r=e.buttonStyle,a=this.logic.isError()||!!t.state.error,i=this.logic.isLoading()||t.state.isFetching;return n.createElement("div",{className:j()({"ab-wpr-purchase-container-large":r===Ve,"ab-wpr-purchase-container-default":r!==Ve})},i&&n.createElement(k,{className:"ab-wpr-purchase-container-loading"}),!i&&!a&&this.renderButton(),!i&&a&&this.renderError())}}]),r}(n.Component),(function(e,t){return JSON.stringify(e.user)!==JSON.stringify(t.user)})),tt=function(e){var t=e.buttonStyle,r=e.itemId;return n.createElement(o.Subscribe,{to:[v.a]},(function(e){return n.createElement(et,{user:e.state.userSession.state.user,currency:e.state.currency,itemId:r,buttonStyle:t})}))};l.a.isCollapsed=!1,l.a.logStateChanges=!1;var rt={AppRootId:document.getElementById("ab-wpr-root"),AuthButtonRootId:document.getElementById("ab-wpr-login-button-root"),AuthButtonRootMobileId:document.getElementById("ab-wpr-login-button-root-mobile"),FooterPrivacyLinkId:document.getElementById("ab-wpr-footer-privacy-link"),PurchaseButtonClassName:document.getElementById("ab-wpr-purchase-btn")};rt.AppRootId?c.a.render(a.a.createElement(o.Provider,{inject:[s.a,s.a.state.userSession]},a.a.createElement(O,null)),rt.AppRootId):console.error("Element with id ab-wpr-root is not exist, please add element with id ab-wpr-root to make plugin work correctly"),rt.AuthButtonRootId&&c.a.render(a.a.createElement(o.Provider,{inject:[s.a,s.a.state.userSession]},a.a.createElement(oe,null)),rt.AuthButtonRootId),rt.FooterPrivacyLinkId&&c.a.render(a.a.createElement(o.Provider,{inject:[s.a,s.a.state.userSession]},a.a.createElement(me,null)),rt.FooterPrivacyLinkId);var nt=rt.PurchaseButtonClassName;nt&&Array.prototype.forEach.call(nt,(function(e){var t=e.getAttribute("data-item-id"),r=e.getAttribute("data-btn-type");t&&c.a.render(a.a.createElement(o.Provider,{inject:[s.a,s.a.state.userSession]},a.a.createElement(tt,{itemId:t,buttonStyle:r})),e)}))},31:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(175),a=r(28),i=Object(n.a)({}),c=Object(a.b)({history:i})},33:function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return u}));var n=r(2),a=r.n(n),i=r(8),c=r(111);function o(e){return s.apply(this,arguments)}function s(){return(s=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){if(t){var n=new Image;n.onload=function(){return e()},n.onerror=function(e){return r(e)},n.src=t}else r()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u=function(){return c().split("-").join("")}},34:function(e,t,r){"use strict";r.d(t,"a",(function(){return f})),r.d(t,"d",(function(){return p})),r.d(t,"e",(function(){return d})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return v}));var n=r(4),a=r(3),i=r(15),c=r(6),o=r(7),s=r(13),u=r(0),l=r(25),f={LEGAL_DOCUMENT:"Legal Document",MARKETING_PREFERENCE:"Marketing Preference"},p=Object(l.a)("LEGAL_DOCUMENT_TYPE","MARKETING_PREFERENCE_TYPE"),d=Object(l.a)("FOOTER"),h=u.c([u.j({id:u.i,localeCode:u.i,isDefaultSelection:u.b}),u.g({createdAt:u.i,updatedAt:u.i,contentType:u.i,attachmentLocation:u.i,attachmentChecksum:u.i,attachmentVersionIdentifier:u.i,description:u.i,status:u.i,publishedDate:u.i})]),m=u.c([u.j({id:u.i,displayVersion:u.i,isCommitted:u.b,isInEffect:u.b}),u.g({createdAt:u.i,updatedAt:u.i,description:u.i,status:u.i,publishedDate:u.i,localizedPolicyVersions:u.a(h)})]),g=u.c([u.j({id:u.i,policyName:u.i,policyType:u.i,namespace:u.i,countryCode:u.i,shouldNotifyOnUpdate:u.b,isMandatory:u.b,isDefaultOpted:u.b,isDefaultSelection:u.b}),u.g({createdAt:u.i,updatedAt:u.i,readableId:u.i,countryGroupCode:u.i,baseUrls:u.a(u.i),policyVersions:u.a(m),description:u.i})]),b=u.a(g),v=function(e){Object(c.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(i.a)(n),r.prototype),n}return Object(n.a)(r)}(Object(s.a)(Error))},38:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return u}));var n=r(172),a=r(33),i="deviceId",c="mobile",o="desktop",s=function(){return Object(n.isMobile)()?c:o},u=function(){var e=Object(a.a)();return localStorage.setItem(i,e),e}},47:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(3),a=r(4),i=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,null,[{key:"calculateIntegerPrice",value:function(e,t){return e/Math.pow(10,t.decimals)}},{key:"currencyToMap",value:function(e){return e.reduce((function(e,t){return e.set(t.currencyCode,t),e}),new Map)}}]),e}()},5:function(e,t,r){"use strict";r.d(t,"j",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"h",(function(){return i})),r.d(t,"a",(function(){return c})),r.d(t,"i",(function(){return o})),r.d(t,"f",(function(){return s})),r.d(t,"d",(function(){return u})),r.d(t,"k",(function(){return l})),r.d(t,"g",(function(){return f})),r.d(t,"e",(function(){return p})),r.d(t,"c",(function(){return d}));var n="https://www.paydaythegame.com/",a="dc7ccc551f634788b4411ae356cffa00",i="starbreeze",c="https://nebula.starbreeze.com/",o="https://nebula.starbreeze.com/",s="https://nebula.starbreeze.com/legal/",u="N/A",l="/account/register/",f="/account/login/",p="/account/forgot/",d=!0},57:function(e,t,r){"use strict";r.d(t,"b",(function(){return h})),r.d(t,"a",(function(){return g})),r.d(t,"c",(function(){return b})),r.d(t,"g",(function(){return v})),r.d(t,"f",(function(){return y})),r.d(t,"e",(function(){return C})),r.d(t,"d",(function(){return j}));var n=r(2),a=r.n(n),i=r(8),c=r(0),o=r(5),s=r(11),u=r(17),l=r(70),f=r.n(l),p=r(23),d=r(38);function h(e){return m.apply(this,arguments)}function m(){return(m=Object(i.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(s.a)(o.a,"/iam/v3/public/users/me"),e.abrupt("return",Object(u.a)((function(){return t.get(r)}),p.f,p.g,(function(e){return e})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=Object(s.a)(o.a,"/iam/v3/oauth/token");function b(e,t){var r=t.code,n=t.codeVerifier,a=t.redirectURI,i=t.clientId,c=new URLSearchParams;return c.append("grant_type","authorization_code"),c.append("code",r),c.append("code_verifier",n),c.append("client_id",i),c.append("redirect_uri",a),Object(u.a)((function(){return e.post(g,c,{headers:{"Device-Id":localStorage.getItem("deviceId")||Object(d.b)(),"Device-Name":(f.a.name||"").toString(),"Device-Os":(f.a.os||"").toString(),"Device-Type":Object(d.c)()}})}),p.b,p.c,(function(e){return e}))}var v=Object(s.a)(o.a||"","/iam/v3/oauth/token");function y(e,t){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(a.a.mark((function e(t,r){var n,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.refreshToken,i=r.clientId,c=new URLSearchParams,n&&c.append("refresh_token",n),c.append("client_id",i),c.append("grant_type","refresh_token"),e.abrupt("return",Object(u.a)((function(){return t.post(v,c)}),p.b,p.e,(function(e){return e})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=Object(s.a)(o.a,"iam/v3/logout");function j(e){return w.apply(this,arguments)}function w(){return(w=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u.a)((function(){return t.post(C,"")}),c.i,p.d,(function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},59:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return y}));var n,a,i=r(3),c=r(4),o=r(97),s=r(167),u=r(5),l=r(11),f=r(174),p=r(0),d=r(30),h=p.j({csrf:p.i,codeVerifier:p.i}),m=p.j({csrf:p.i,payload:p.k([p.i,p.e])}),g=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"stringifyStoredState",value:function(e){return JSON.stringify(e)}},{key:"parseStoredState",value:function(e){try{var t=JSON.parse(e),r=h.decode(t);if(Object(d.isLeft)(r))throw r.left;return{storedState:r.right,error:null}}catch(n){return{storedState:null,error:n}}}},{key:"stringifySentState",value:function(e){return JSON.stringify(e)}},{key:"parseSentState",value:function(e){try{var t=JSON.parse(e),r=m.decode(t);if(Object(d.isLeft)(r))throw r.left;return{sentState:r.right,error:null}}catch(n){return{sentState:null,error:n}}}}]),e}();function b(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}(a=n||(n={})).login="",a.register="register",a.forgotPassword="forgot-password";var v=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"generateCodeChallenge",value:function(e){var t=b(o.randomBytes(43));return{verifier:t,challenge:b(o.createHash(e).update(t).digest())}}},{key:"generateCodeCsrf",value:function(){return f.v4()}}]),e}(),y=function(){function e(t){var r=t.clientId,n=t.redirectURI,a=t.saveCodeChallengeStoredState,c=t.loadLastCodeChallengeStoredState,o=t.clearLastCodeChallengeStoredState;Object(i.a)(this,e),this.clientId=void 0,this.redirectURI=void 0,this.saveCodeChallengeStoredState=void 0,this.loadLastCodeChallengeStoredState=void 0,this.clearLastCodeChallengeStoredState=void 0,this.clientId=r,this.redirectURI=n,this.saveCodeChallengeStoredState=a,this.loadLastCodeChallengeStoredState=c,this.clearLastCodeChallengeStoredState=o}return Object(c.a)(e,[{key:"matchReceivedState",value:function(e){var t=g.parseSentState(e);if(t.error)return{error:t.error,result:null};var r=g.parseStoredState(this.loadLastCodeChallengeStoredState()||"");if(r.error)return{error:r.error,result:null};var n=t.sentState,a=r.storedState;return n.csrf!==a.csrf?{error:null,result:null}:{error:null,result:{payload:n.payload,codeVerifier:a.codeVerifier}}}},{key:"createLoginWebsiteUrl",value:function(e){var t=e.payload,r=e.targetAuthPage,n=v.generateCodeChallenge("sha256"),a=n.verifier,i=n.challenge,c=v.generateCodeCsrf(),o={codeVerifier:a,csrf:c},f={csrf:c,payload:s.a.toJSONString(t)},p=new URLSearchParams;return p.append("response_type","code"),p.append("client_id",u.b),p.append("redirect_uri",u.j),p.append("state",g.stringifySentState(f)),p.append("code_challenge",i),p.append("code_challenge_method","S256"),p.append("target_auth_page",r||""),p.append("createHeadless","false"),this.saveCodeChallengeStoredState(g.stringifyStoredState(o)),new URL(Object(l.a)(u.a,"/iam/v3/oauth/authorize?".concat(p.toString()))).toString()}}]),e}()},61:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(25),a=Object(n.a)("network","server","unknown")},62:function(e,t,r){e.exports={loadingBarIcon:"LoadingBarIcon_loadingBarIcon__14WgP",bar:"LoadingBarIcon_bar__vWX3h",loadingBarIconAnimation:"LoadingBarIcon_loadingBarIconAnimation__3NGpv"}},95:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(6),a=r(7),i=r(13),c=(r(2),r(8),r(3)),o=r(4);Error;var s=function(e){return new Promise((function(t){return setTimeout(t,e)}))}},99:function(e,t,r){"use strict";r.d(t,"a",(function(){return L}));var n=r(2),a=r.n(n),i=r(8),c=r(3),o=r(4),s=r(6),u=r(7),l=r(114),f=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"init",value:function(){}},{key:"deinit",value:function(){}}]),r}(r(12).Container),p=r(21),d=r(5),h=r(11),m=r(17),g=r(15),b=r(13),v=r(0),y=v.c([v.j({id:v.i}),v.g({createdAt:v.i,updatedAt:v.i,localeCode:v.i,contentType:v.i,attachmentLocation:v.i,attachmentChecksum:v.i,attachmentVersionIdentifier:v.i,description:v.i,isDefaultSelection:v.b})]),O=v.c([v.j({id:v.i}),v.g({createdAt:v.i,updatedAt:v.i,displayVersion:v.i,description:v.i,localizedPolicyVersions:v.a(y),isCommitted:v.b,isCrucial:v.b,isInEffect:v.b})]),C=v.c([v.j({policyId:v.i,policyName:v.i,policyType:v.i,namespace:v.i,countryCode:v.i,isMandatory:v.b,isAccepted:v.b}),v.g({readableId:v.i,countryGroupCode:v.i,baseUrls:v.a(v.i),policyVersions:v.a(O),description:v.i})]),j=v.a(C),w=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(c.a)(this,r),n=t.call(this,e),Object.setPrototypeOf(Object(g.a)(n),r.prototype),n}return Object(o.a)(r)}(Object(b.a)(Error));function E(e,t){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(m.a)((function(){return t.get(Object(h.a)(d.a,"agreement/public/eligibilities/namespaces/".concat(r)))}),j,w,(function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=r(34),I=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:"fetchError",value:function(e){this.emit("fetchError",e)}}]),r}(l.a),L=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this)).props=void 0,n.event=new I,n.props=e,n.state={isFetching:!1,eligibilities:null,error:null},n}return Object(o.a)(r,[{key:"init",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchUnsignedPolicies();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchUnsignedPolicies",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.state.isFetching){e.next=3;break}return e.abrupt("return");case 3:if(this.setState({isFetching:!0,eligibilities:null,error:null}),t=p.c.withSessionIdFromCookie()){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,E(t,this.props.namespace);case 9:if(!(r=e.sent).error){e.next=12;break}throw r.error;case 12:if(r.response.data.length){e.next=14;break}return e.abrupt("return");case 14:if(0!==(n=r.response.data.filter((function(e){return!e.isAccepted&&e.isMandatory&&e.policyType===S.a.LEGAL_DOCUMENT})).map((function(e){return e.policyVersions=e.policyVersions&&e.policyVersions.slice(0,1).map((function(e){return e.localizedPolicyVersions=e.localizedPolicyVersions&&e.localizedPolicyVersions.filter((function(e){return e.isDefaultSelection})),e})).filter((function(e){return e.localizedPolicyVersions&&e.localizedPolicyVersions.length>0})),e})).filter((function(e){return e.policyVersions&&e.policyVersions.length>0}))).length){e.next=17;break}throw new Error;case 17:this.setState({eligibilities:n}),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),this.setState({error:e.t0}),this.event.fetchError(e.t0);case 24:return e.prev=24,this.setState({isFetching:!1}),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[0,20,24,27]])})));return function(){return e.apply(this,arguments)}}()}]),r}(f)}},[[176,1,2]]]);